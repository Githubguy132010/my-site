<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>GitHub Workflow Rewrite for Arch Linux without the beeps | Githubguy132010</title>
<meta name="keywords" content="github-actions, ci-cd, arch-linux">
<meta name="description" content="The GitHub Workflow Rewrite Today, I&rsquo;d like to share how we&rsquo;ve improved the GitHub Actions workflow for automatically building our Arch Linux ISO without system beeps. This workflow is a crucial component of our project, as it generates a fresh ISO with the latest updates daily.
Key Improvements Enhanced Caching
Implementation of a smart caching system for Pacman packages Use of monthly cache keys to keep cache size manageable Significant acceleration of the build process Additional Details: By leveraging the caching mechanism, we have reduced the build time by approximately 30%.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/2024/arch-linux-without-the-beeps-gh-wf-overhaul/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e0c97bcc217a9a8796a44cbcd2fdeb59738221ec978f9057e2d0f496d6181b7e.css" integrity="sha256-4Ml7zCF6moeWpEy80v3rWXOCIeyXj5BX4tD0ltYYG34=" rel="preload stylesheet" as="style">

<link rel="stylesheet" href="http://localhost:1313/css/loader.css">
<link rel="stylesheet" href="http://localhost:1313/css/background.css">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/2024/arch-linux-without-the-beeps-gh-wf-overhaul/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
    <div id="loading-screen">
        <div class="loader"></div>
    </div>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Githubguy132010 (Alt + H)">Githubguy132010</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/who-i-am/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      GitHub Workflow Rewrite for Arch Linux without the beeps
    </h1>
    <div class="post-meta"><span title='2024-01-23 00:00:00 +0000 UTC'>January 23, 2024</span>&nbsp;·&nbsp;3 min

</div>
  </header> 
  <div class="post-content"><h1 id="the-github-workflow-rewrite">The GitHub Workflow Rewrite<a hidden class="anchor" aria-hidden="true" href="#the-github-workflow-rewrite">#</a></h1>
<p>Today, I&rsquo;d like to share how we&rsquo;ve improved the GitHub Actions workflow for automatically building our Arch Linux ISO without system beeps. This workflow is a crucial component of our project, as it generates a fresh ISO with the latest updates daily.</p>
<h2 id="key-improvements">Key Improvements<a hidden class="anchor" aria-hidden="true" href="#key-improvements">#</a></h2>
<ol>
<li>
<p><strong>Enhanced Caching</strong></p>
<ul>
<li>Implementation of a smart caching system for Pacman packages</li>
<li>Use of monthly cache keys to keep cache size manageable</li>
<li>Significant acceleration of the build process</li>
<li><strong>Additional Details</strong>: By leveraging the caching mechanism, we have reduced the build time by approximately 30%. This not only saves time but also reduces the load on our build servers.</li>
</ul>
</li>
<li>
<p><strong>Robust Error Handling</strong></p>
<ul>
<li>Addition of comprehensive error checking</li>
<li>Improved logging for debugging</li>
<li>Timeout limit of 120 minutes to prevent hanging builds</li>
<li><strong>Additional Details</strong>: The error handling now includes specific checks for common issues such as network failures and package conflicts, ensuring that the build process is more resilient.</li>
</ul>
</li>
<li>
<p><strong>Automated Release Notes</strong></p>
<ul>
<li>Automatic generation of release notes</li>
<li>Including changelog since last release</li>
<li>Clear presentation of features and changes</li>
<li><strong>Additional Details</strong>: The release notes are now formatted in Markdown, making them easy to read and integrate into our documentation.</li>
</ul>
</li>
<li>
<p><strong>Security and Verification</strong></p>
<ul>
<li>Automatic generation of SHA256 and SHA512 checksums</li>
<li>Build process verification</li>
<li>Checks for successful ISO creation</li>
<li><strong>Additional Details</strong>: We have also implemented GPG signing for the ISOs, providing an additional layer of security and authenticity verification.</li>
</ul>
</li>
</ol>
<h2 id="technical-details">Technical Details<a hidden class="anchor" aria-hidden="true" href="#technical-details">#</a></h2>
<p>The workflow runs in a Docker container based on Arch Linux, ensuring a clean and isolated build environment. We use <code>archiso</code> for building the ISO, with several important modifications:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">DOCKER_BUILDKIT</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ISO_FILENAME</span>: <span style="color:#ae81ff">Arch.iso</span>
</span></span></code></pre></div><p>The build process is divided into clear steps:</p>
<ol>
<li>Preparing the build environment</li>
<li>Caching Pacman packages</li>
<li>Building the ISO</li>
<li>Generating checksums</li>
<li>Creating a new release</li>
</ol>
<p><strong>Additional Technical Insights</strong>: The Docker container is configured to use the latest Arch Linux base image, ensuring that we always build with the most up-to-date packages. We have also optimized the Dockerfile to minimize the image size and build time.</p>
<h2 id="future-improvements">Future Improvements<a hidden class="anchor" aria-hidden="true" href="#future-improvements">#</a></h2>
<p>Looking ahead, I plan to integrate more advanced features such as:</p>
<ul>
<li><strong>Parallel Builds</strong>: To further reduce build times, I am exploring the possibility of running multiple build processes in parallel.</li>
<li><strong>Automated Testing</strong>: Implementing automated tests for the ISO to ensure that it functions correctly on a variety of hardware configurations.</li>
<li><strong>User Feedback Integration</strong>: Gathering feedback from users to continuously improve the build process and address any issues they encounter.</li>
</ul>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>This rewrite has resulted in a more reliable and efficient workflow. The daily builds are now faster and produce consistent results. The improved error handling and logging make it easier to identify and resolve any issues that may arise.</p>
<p>For those interested in the details: the complete workflow configuration can be found in our <a href="https://github.com/thomasbrugman/Arch-Linux-without-the-beeps">GitHub repository</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/github-actions/">Github-Actions</a></li>
      <li><a href="http://localhost:1313/tags/ci-cd/">Ci-Cd</a></li>
      <li><a href="http://localhost:1313/tags/arch-linux/">Arch-Linux</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">Githubguy132010</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>

<script src="http://localhost:1313/js/loader.js"></script>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

<script src="/js/loader.js"></script>
</body>
</html>
</body>

</html>
